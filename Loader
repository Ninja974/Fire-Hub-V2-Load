--// SERVICIOS
local HttpService = game:GetService("HttpService")
local Analytics = game:GetService("RbxAnalyticsService")

--// CONFIGURACI√ìN
local key = "TU-KEY-AQU√ç" -- üîë Peg√° ac√° la key generada con ?genkey
local hwid = Analytics:GetClientId()
local apiURL = "http://TU-IP-AQU√ç:8000/validate?key=" .. key .. "&hwid=" .. hwid

--// VALIDACI√ìN DE LICENCIA
local isValid = false
local success, result = pcall(function()
    return game:HttpGet(apiURL)
end)

if success then
    local data = HttpService:JSONDecode(result)
    if data.valid then
        print("üü¢ License checked successfully.")
        isValid = true
    else
        warn("‚ùå Access Denied: " .. (data.reason or "Unknown"))
        game:Shutdown()
    end
else
    warn("‚ùå Validation error. Please contact the seller.")
    game:Shutdown()
end

--// SI LA LICENCIA ES V√ÅLIDA, CARGAMOS EL SCRIPT DEL MAPA
if isValid then
    local currentPlaceId = game.PlaceId

    local mapScripts = {
        [11468034852] = "https://raw.githubusercontent.com/Ninja974/Fire-Hub-V2/refs/heads/main/Mugen",  -- Mugen
        [11468075017] = "https://raw.githubusercontent.com/Ninja974/Fire-Hub-V2/refs/heads/main/Dungeonn",  -- Ouwighara
        [13883059853] = "https://raw.githubusercontent.com/Ninja974/Fire-Hub-V2/refs/heads/main/Map%202%20Priv",  -- Map 2 Priv
        [13883279773] = "https://raw.githubusercontent.com/Ninja974/Fire-Hub-V2/refs/heads/main/Map%201%20Priv",  -- Map 1 Priv
        [17387475546] = "https://raw.githubusercontent.com/Ninja974/Fire-Hub-V2/refs/heads/main/Map%201%20Public",  -- Map 1 Public
        [17387482786] = "https://raw.githubusercontent.com/Ninja974/Fire-Hub-V2/refs/heads/main/Map%202%20Public"   -- Map 2 Public
    }

    if mapScripts[currentPlaceId] then
        print("Loading Script for PlaceId: " .. currentPlaceId)
        local ok, mapScript = pcall(function()
            return game:HttpGet(mapScripts[currentPlaceId] .. "?v=" .. tostring(math.random(1000, 9999)), true)
        end)

        if ok then
            loadstring(mapScript)()
        else
            warn("‚ö†Ô∏è Error loading map script.")
        end
    else
        warn("‚ö†Ô∏è No script configured for this map.")
    end
end
